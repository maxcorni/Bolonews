{# 
    Ce bloc affiche un formulaire pour modifier un article existant.
    Il permet à l'utilisateur de modifier le titre, le chapeau, le contenu, la catégorie, l'image et les paramètres de publication.
    Il est utilisé pour permettre aux utilisateurs de mettre à jour leur contenu partagé.
#}

{% extends 'base.html.twig' %}

{% block title %}Modifier l'article - {{ article.titre }}{% endblock %}

{% block body %}
    <div class="container">
        <div class="article-form-wrapper">
            <div class="article-form-header">
                <h1>{{ ux_icon('bi:pencil-square') }} Modifier l'article</h1>
                <p class="form-description">Apportez vos modifications à "{{ article.titre }}"</p>
            </div>

            {{ form_start(form, {'attr': {'class': 'article-form', 'enctype': 'multipart/form-data'}}) }}
                <div class="form-grid">
                    <div class="form-section">
                        <h2>{{ ux_icon('bi:pencil') }} Contenu principal</h2>
                        <div class="form-group">
                            {{ form_label(form.titre, 'Titre de l\'article') }}
                            {{ form_widget(form.titre, {'attr': {'class': 'form-control', 'placeholder': 'Saisissez le titre de votre article...'}}) }}
                            {{ form_errors(form.titre) }}
                        </div>

                        <div class="form-group">
                            {{ form_label(form.chapeau, 'Chapeau (résumé)') }}
                            {{ form_widget(form.chapeau, {'attr': {'class': 'form-control', 'placeholder': 'Un court résumé de votre article...', 'rows': 3}}) }}
                            {{ form_errors(form.chapeau) }}
                        </div>

                        <div class="form-group">
                            {{ form_label(form.contenu, 'Contenu de l\'article') }}
                            {{ form_widget(form.contenu, {'attr': {'class': 'form-control', 'placeholder': 'Rédigez le contenu de votre article...', 'rows': 10}}) }}
                            {{ form_errors(form.contenu) }}
                        </div>
                    </div>

                    <div class="form-section">
                        <h2>{{ ux_icon('bi:gear') }} Paramètres</h2>
                        <div class="form-group">
                            {{ form_label(form.categorie, 'Catégorie') }}
                            {{ form_widget(form.categorie, {'attr': {'class': 'form-control'}}) }}
                            {{ form_errors(form.categorie) }}
                        </div>

                        <div class="form-group">
                            {{ form_label(form.imageFile, 'Image de l\'article') }}
                            {% if article.image %}
                                <div class="current-image">
                                    <img src="{{ asset('images/articles/' ~ article.image) }}" alt="{{ article.titre }}" class="preview-image">
                                    <p class="image-info">Image actuelle</p>
                                </div>
                            {% endif %}
                            <div class="file-input-wrapper">
                                {{ form_widget(form.imageFile, {'attr': {'class': 'file-input', 'accept': 'image/*'}}) }}
                                <div class="file-input-info">
                                    <small>Choisir une nouvelle image (JPG, PNG - Max 2MB)</small>
                                </div>
                            </div>
                            {{ form_errors(form.imageFile) }}
                        </div>

                        <div class="form-group checkbox-group">
                            <div class="checkbox-wrapper">
                                {{ form_widget(form.publie, {'attr': {'class': 'checkbox-input'}}) }}
                                {{ form_label(form.publie, 'Article publié', {'label_attr': {'class': 'checkbox-label'}}) }}
                            </div>
                            {{ form_errors(form.publie) }}
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <a href="{{ path('article_user_list') }}" class="btn btn-secondary">
                        {{ ux_icon('bi:arrow-left') }} Annuler
                    </a>
                    <button type="submit" class="btn btn-primary">
                        {{ ux_icon('bi:check-circle') }} Sauvegarder les modifications
                    </button>
                </div>
            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}
